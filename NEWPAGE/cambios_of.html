<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRODIGIOS - Academia de Música</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.4.1/css/buttons.dataTables.min.css">
    
    
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #ff9900;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --success: #2ecc71;
            --warning: #f39c12;
            --info: #1abc9c;
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            background-color: #f5f7fa;
            color: #333;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        
        /* Formulario de registro de estudiantes */
        .form-container {
            background-color: #ffffff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .form-container h3 {
            margin-bottom: 20px;
        }

        /* Navbar superior */
        .navbar {
            background: linear-gradient(135deg, var(--primary) 0%, #1a2a3a 100%);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 1030;
            padding: 12px 25px;
            height: 70px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
        }
        
        .navbar-brand {
            font-weight: 100;
            font-size: 1.8rem;
            letter-spacing: 1px;
            color: white !important;
            display: flex;
            align-items: center;
        }
        
        .navbar-brand i {
            margin-right: 10px;
            color: var(--accent);
        }
        
        /* Sidebar izquierdo */
        .sidebar {
            width: 250px;
            background: linear-gradient(180deg, var(--primary) 0%, #1a2a3a 100%);
            position: fixed;
            top: 70px;
            bottom: 0;
            left: 0;
            box-shadow: 3px 0 15px rgba(0, 0, 0, 0.1);
            transition: var(--transition);
            z-index: 1020;
            overflow-y: auto;
        }
        
        .sidebar h2 {
            margin: 20px 0;
            font-size: 1.4rem;
            text-align: center;
            color: var(--light);
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.15);
            font-weight: 600;
        }
        
        .sidebar .menu {
            padding: 0;
        }
        
        .sidebar .menu li {
            overflow: hidden;
        }
        
        .sidebar .menu li a, 
        .sidebar .menu li summary {
            color: var(--light);
            text-decoration: none;
            font-size: 1rem;
            padding: 14px 20px;
            display: block;
            transition: var(--transition);
            border-left: 4px solid transparent;
            font-weight: 500;
            padding-left: 18px !important;
        }
        
        .sidebar .menu li a:hover, 
        .sidebar .menu li summary:hover,
        .sidebar .menu li a.active {
            background-color: rgba(255, 255, 255, 0.1);
            border-left-color: var(--accent);
        }
        
        .sidebar .menu li a i,
        .sidebar .menu li summary i {
            width: 25px;
            text-align: center;
            margin-right: 12px;
            font-size: 1.1rem;
        }
        
        .sidebar .submenu {
            background-color: rgba(0, 0, 0, 0.15);
            padding: 0;
        }
        
        .sidebar .submenu li a {
            font-size: 0.95rem;
        }
        
        .sidebar .submenu li a:hover {
            background-color: rgba(255, 255, 255, 0.08);
        }
        
        /* Panel de contenido principal */
        .main-content { 
            margin-left: 250px;
            margin-top: 70px;
            padding: 30px;
            flex: 1;
            transition: var(--transition);
        }
        
        .suboption-panel {
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        
        /* Secciones de contenido */
        .dashboard,
        .gestion-estudiante,
        .gestion-docente,
        .gestion-curso,
        .reporte,
        .configuracion {
            display: none;
        }
        
        .dashboard {
            display: block;
        }
        
        /* Títulos de sección */
        .section-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 30px;
            color: var(--primary);
            position: relative;
        }
        
        /* Tarjetas */
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .card {
            background: white;
            border: none;
            border-radius: 12px;
            padding: 25px;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        
        .card:hover {
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--accent);
        }
        
        .card h3 {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: #555;
            font-weight: 600;
        }
        
        .card p {
            font-size: 2.3rem;
            font-weight: 700;
            color: var(--secondary);
            margin: 0;
        }
        
        .card small {
            display: block;
            color: #777;
            font-size: 0.95rem;
            margin-top: 5px;
        }
        
        /* Gráficos */
        .dashboard-charts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .chart-container {
            background: white;
            border: none;
            border-radius: 12px;
            padding: 25px;
            box-shadow: var(--card-shadow);
        }
        
        .chart-container h4 {
            font-size: 1.25rem;
            margin-bottom: 25px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
        }
        
        .chart-container h4 i {
            color: var(--accent);
            background: rgba(231, 76, 60, 0.1);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Tablas y actividades */
        .recent-activities {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: var(--card-shadow);
        }
        
        .recent-activities h3 {
            font-size: 1.35rem;
            margin-bottom: 25px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
        }
        
        .recent-activities h3 i {
            color: var(--accent);
            background: rgba(231, 76, 60, 0.1);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Botones personalizados */
        .btn-custom {
            padding: 10px 25px;
            background: linear-gradient(135deg, var(--secondary) 0%, #2980b9 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }
        
        .btn-custom:hover {
            background: linear-gradient(135deg, #2980b9 0%, #1a5a8a 100%);
            background-color: #0056b3;
            color: #fff;
        }

        .dataTables_length {
            padding: 5px 10px;
        }

        /* Responsividad */
        @media (max-width: 1200px) {
            .dashboard-charts {
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            }
        }

        /* Nuevos estilos para el navbar */
        .navbar-icons {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-right: 20px;
        }
        
        .notification-icon, .chat-icon {
            position: relative;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .notification-icon:hover, .chat-icon:hover {
            color: var(--accent);
        }
        
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -8px;
            background-color: var(--accent);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Perfil de usuario en sidebar */
        .profile-section {
            padding: 20px 15px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.15);
        }
        
        .profile-img {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--accent);
            margin-bottom: 15px;
        }
        
        .profile-name {
            color: var(--light);
            font-size: 1.1rem;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        .profile-role {
            color: var(--accent);
            font-size: 0.9rem;
            margin-bottom: 0;
        }
        
        /* Ajuste para acomodar el perfil */
        .sidebar h2 {
            margin: 10px 0;
        }
        
        /* Otros ajustes menores */
        .navbar-brand {
            font-size: 1.6rem; /* Ligeramente más pequeño */
        }

        .config-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .config-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--primary);
        }

        .config-card {
            background: white;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            margin-bottom: 25px;
            height: 100%;
            transition: var(--transition);
            overflow: hidden;
        }

        .card-header {
            padding: 18px 25px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .card-body {
            padding: 25px;
        }
        
        .config-card:hover {
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }
        
        .form-control-lg {
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        
        .form-control-lg:focus {
            border-color: var(--secondary);
            box-shadow: 0 0 0 0.25rem rgba(52, 152, 219, 0.25);
        }

        .btn-lg {
            padding: 12px 25px;
            border-radius: 8px;
            font-weight: 500;
            transition: var(--transition);
        }
        
        .btn-info {
            background: linear-gradient(135deg, var(--info) 0%, #16a085 100%);
            border: none;
            color: white;
        }
        
        .btn-info:hover {
            background: linear-gradient(135deg, #16a085 0%, #138a72 100%);
        }
        
        .btn-warning {
            background: linear-gradient(135deg, var(--warning) 0%, #e67e22 100%);
            border: none;
            color: white;
        }
        
        .btn-warning:hover {
            background: linear-gradient(135deg, #e67e22 0%, #d35400 100%);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, #1a2a3a 100%);
            border: none;
            color: white;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #1a2a3a 0%, #0e1a25 100%);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, var(--secondary) 0%, #2980b9 100%);
            border: none;
            color: white;
        }
        
        .btn-secondary:hover {
            background: linear-gradient(135deg, #2980b9 0%, #1a5a8a 100%);
        }
        
        .progress {
            height: 10px;
            border-radius: 5px;
        }
        
        .progress-bar {
            background: var(--secondary);
        }
        
        .config-row {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .system-card {
            grid-column: span 3;
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: var(--success);
        }
        
        input:checked + .slider:before {
            transform: translateX(30px);
        }
        
        .switch-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }
        
        .switch-label {
            flex: 1;
        }
        
        .system-metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .metric-label {
            font-weight: 500;
        }
        
        .metric-value {
            font-weight: 600;
            color: var(--primary);
        }
        
        .theme-selector {
            border: 2px solid transparent;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .theme-selector:hover, .theme-selector.active {
            border-color: var(--accent);
            background: rgba(255, 153, 0, 0.05);
        }
        
        .theme-selector i {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }
        
        .status-badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
        }
        
        .status-active {
            background: rgba(46, 204, 113, 0.15);
            color: var(--success);
        }
        
        .status-warning {
            background: rgba(243, 156, 18, 0.15);
            color: var(--warning);
        }
        
        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        .card-subtitle {
            color: #777;
            margin-bottom: 20px;
        }

        /* Estilos para modo oscuro */
        body.theme-dark {
            background-color: #18191a;
            color: #e4e6eb;
        }

        body.theme-dark .navbar {
            background: linear-gradient(135deg, #242526 0%, #18191a 100%);
        }

        body.theme-dark .sidebar {
            background: linear-gradient(180deg, #242526 0%, #18191a 100%);
        }

        body.theme-dark .card,
        body.theme-dark .chart-container,
        body.theme-dark .recent-activities,
        body.theme-dark .form-container,
        body.theme-dark .config-card {
            background-color: #242526;
            color: #e4e6eb;
            border: 1px solid #3a3b3c;
        }

        body.theme-dark .table {
            color: #e4e6eb;
        }

        body.theme-dark .table thead {
            background-color: #3a3b3c;
        }

        body.theme-dark .table-hover tbody tr:hover {
            background-color: #3a3b3c;
            color: #e4e6eb;
        }

        body.theme-dark .section-title {
            color: #e4e6eb;
        }

        body.theme-dark .card h3,
        body.theme-dark .card p,
        body.theme-dark .card small {
            color: #e4e6eb;
        }

        body.theme-dark .card small {
            color: #b0b3b8;
        }

        body.theme-dark .form-control,
        body.theme-dark .form-select {
            background-color: #3a3b3c;
            color: #e4e6eb;
            border: 1px solid #3a3b3c;
        }

        body.theme-dark .form-control:focus,
        body.theme-dark .form-select:focus {
            background-color: #3a3b3c;
            color: #e4e6eb;
            border-color: #4a4b4c;
            box-shadow: 0 0 0 0.25rem rgba(65, 66, 68, 0.25);
        }

        body.theme-dark .dropdown-menu {
            background-color: #242526;
            border: 1px solid #3a3b3c;
        }

        body.theme-dark .dropdown-item {
            color: #e4e6eb;
        }

        body.theme-dark .dropdown-item:hover {
            background-color: #3a3b3c;
            color: #e4e6eb;
        }

        body.theme-dark .progress {
            background-color: #3a3b3c;
        }

        body.theme-dark .dt-buttons .btn {
            background-color: #3a3b3c !important;
            color: #e4e6eb !important;
            border: 1px solid #4a4b4c !important;
        }

        body.theme-dark .config-card .card-header {
            color: #e4e6eb;
        }

        body.theme-dark .switch-label h6,
        body.theme-dark .metric-label,
        body.theme-dark .metric-value {
            color: #e4e6eb;
        }

        body.theme-dark .form-control-color {
            background-color: #3a3b3c;
        }

        body.theme-dark {
            --light: #e4e6eb;
            --dark: #b0b3b8;
        }

        #theme-toggle i {
            transition: color 0.3s ease;
        }

        @media (max-width: 1200px) {
            .config-row {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .system-card {
                grid-column: span 2;
            }
        }

        @media (max-width: 992px) {
            .sidebar {
                width: 70px;
            }
            
            .sidebar h2 span,
            .sidebar .menu li a span,
            .sidebar .menu li summary span {
                display: none;
            }
            
            .sidebar h2 {
                font-size: 1.8rem;
                padding: 15px 0;
            }
            
            .sidebar .menu li a,
            .sidebar .menu li summary {
                text-align: center;
                padding: 15px 10px;
            }
            
            .sidebar .menu li a i,
            .sidebar .menu li summary i {
                margin-right: 0;
                font-size: 1.4rem;
                display: block;
                margin: 0 auto 5px;
            }
            
            .sidebar .submenu {
                position: absolute;
                left: 70px;
                width: 200px;
                display: none;
            }
            
            .sidebar .menu li details[open] .submenu {
                display: block;
            }
            
            .main-content {
                margin-left: 70px;
            }
            .dashboard-charts {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .main-content {
                padding: 20px;
            }
            
            .dashboard-cards {
                grid-template-columns: 1fr;
            }

            .config-row {
                grid-template-columns: 1fr;
            }
            
            .system-card {
                grid-column: span 1;
            }
            
            .config-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
        }
        
        @media (max-width: 576px) {
            .navbar {
                padding: 10px 15px;
            }
            
            .navbar-brand {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navbar superior -->
    <header class="navbar">
        <div class="container-fluid d-flex justify-content-between align-items-center">
            <span class="navbar-brand">Bienvenido!</span>
            <div class="d-flex align-items-center">
                <div class="navbar-icons">
                    <div class="notification-icon mx-2" id="theme-toggle" title="Cambiar tema">
                        <i id="theme-icon" class="fas fa-moon"></i>
                    </div>
                    <div class="notification-icon">
                        <i class="fa-solid fa-bell"></i>
                        <span class="notification-badge">0</span>
                    </div>
                    <div class="chat-icon">
                        <i class="fa-solid fa-comment-dots"></i>
                        <span class="notification-badge">0</span>
                    </div>
                </div>
                <div class="dropdown">
                    <a href="#" class="d-block link-light text-decoration-none dropdown-toggle" id="userMenu" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="fa-solid fa-user-circle fa-xl"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end shadow">
                        <li><a class="dropdown-item" href=""><i class="fa-solid fa-user me-2"></i>Perfil</a></li>
                        <li><a class="dropdown-item" href=""><i class="fa-solid fa-gear me-2"></i>Configuración</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="" id="logoutBtn"><i class="fa-solid fa-right-from-bracket me-2"></i>Cerrar Sesión</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Sidebar izquierdo -->
    <aside class="sidebar">
        
        <h2><span>PRODIGIOS</span></h2>
        <div class="profile-section">
            <img src="src/assets/img/user.jpg" alt="Foto de perfil" class="profile-img">
            <h4 class="profile-name">Luis Miguel Roque Huacca</h4>
            <p class="profile-role">Administrador</p>
        </div>
        <ul class="menu">
            <li><a href="#" class="active" onclick="toggleVisibility('dashboard', null, 'Dashboard')"><i class="fa-solid fa-house"></i><span>Dashboard</span></a></li>
            <li>
                <details>
                    <summary><i class="fa-solid fa-pen-to-square"></i><span>Registro</span></summary>
                    <ul class="submenu">
                        <li><a href="#" onclick="toggleVisibility(null, 'curso', 'Registro de Cursos')"><i class="fa-solid fa-book"></i><span>Registrar Curso</span></a></li>
                        <li><a href="#" onclick="toggleVisibility(null, 'docente', 'Registro de Docentes')"><i class="fa-solid fa-chalkboard-user"></i><span>Registrar Docente</span></a></li>
                        <li><a href="#" onclick="toggleVisibility(null, 'estudiante', 'Registro de Estudiantes')"><i class="fa-solid fa-user-graduate"></i><span>Registrar Estudiante</span></a></li>
                    </ul>
                </details>
            </li>
            <li><a href="#" onclick="toggleVisibility('reporte', null, 'Reportes')"><i class="fa-solid fa-chart-pie"></i><span>Reportes</span></a></li>
            <li><a href="#" onclick="toggleVisibility('configuracion', null, 'Configuración')"><i class="fa-solid fa-gear"></i><span>Configuración</span></a></li>
        </ul>
    </aside>
    
    <!-- Contenido principal -->
    <main class="main-content">
        <div class="suboption-panel" id="suboption-panel">

            <!-- Dashboard Section -->
            <div class="dashboard">
                <h2 class="section-title">Panel de Control</h2>
                <div class="dashboard-cards">
                    <div class="card">
                        <h3><i class="fa-solid fa-user-graduate me-2"></i> Estudiantes Registrados</h3>
                        <p id="total-estudiantes">0</p>
                        <small>Total en el sistema</small>
                    </div>
                    <div class="card">
                        <h3><i class="fa-solid fa-chalkboard-user me-2"></i> Docentes Activos</h3>
                        <p id="total-docentes">0</p>
                        <small>Enseñando actualmente</small>
                    </div>
                    <div class="card">
                        <h3><i class="fa-solid fa-book"></i> Cursos Disponibles</h3>
                        <p id="total-cursos">0</p>
                        <small>Ofertados este semestre</small>
                    </div>
                    <div class="card">
                        <h3><i class="fa-solid fa-calendar-check me-2"></i> Clases Esta Semana</h3>
                        <p>42</p>
                        <small>Programadas</small>
                    </div>
                </div>
                
                <div class="dashboard-charts">
                    <div class="chart-container">
                        <h4><i class="fa-solid fa-chart-pie"></i> Distribución por Niveles</h4>
                        <canvas id="nivelEstudiantesChart" height="280"></canvas>
                    </div>
                    <div class="chart-container">
                        <h4><i class="fa-solid fa-chart-bar"></i> Cursos por Categoría</h4>
                        <canvas id="categoriaCursosChart" height="280"></canvas>
                    </div>
                    <div class="chart-container">
                        <h4><i class="fa-solid fa-chart-line"></i> Estudiantes por Curso</h4>
                        <canvas id="estudiantesPorCursoChart" height="280"></canvas>
                    </div>
                </div>
                
                <div class="recent-activities">
                    <h3><i class="fa-solid fa-clock-rotate-left"></i> Actividades Recientes</h3>
                    <div class="table-responsive">
                        <table class="table table-hover align-middle ">
                            <thead class="table-light">
                                <tr>
                                    <th>Fecha</th>
                                    <th>Descripción</th>
                                    <th>Usuario</th>
                                </tr>
                            </thead>
                            <tbody id="tabla-actividades">
                                <tr>
                                    <td>2023-11-15</td>
                                    <td>Nuevo estudiante registrado: María Rodríguez</td>
                                    <td>Admin</td>
                                </tr>
                                <tr>
                                    <td>2023-11-14</td>
                                    <td>Curso de Piano Avanzado creado</td>
                                    <td>Admin</td>
                                </tr>
                                <tr>
                                    <td>2023-11-13</td>
                                    <td>Pago registrado: Carlos Mendoza</td>
                                    <td>Admin</td>
                                </tr>
                                <tr>
                                    <td>2023-11-12</td>
                                    <td>Actualización de horarios</td>
                                    <td>Admin</td>
                                </tr>
                                <tr>
                                    <td>2023-11-10</td>
                                    <td>Nueva docente: Laura Méndez</td>
                                    <td>Admin</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!--Estudent section-->
            <div class="gestion-estudiante">
                <!-- Formulario para ingresar datos -->
                <div class="form-container">
                    <h3 class="section-title">Registrar Nuevo Estudiante</h3>
                    <div class="row g-3">
                        <div class="col-md-4">
                            <label for="nombre" class="form-label">Nombre</label>
                            <input type="text" id="nombre" class="form-control" placeholder="Ingrese el nombre completo">
                        </div>
                        <div class="col-md-4">
                            <label for="dni" class="form-label">DNI</label>
                            <input type="text" id="dni" class="form-control" placeholder="Ingrese el DNI">
                        </div>
                        <div class="col-md-4">
                            <label for="fecha_nacimiento" class="form-label">Fecha de Nacimiento</label>
                            <input type="date" id="fecha_nacimiento" class="form-control">
                        </div>
                        <div class="col-md-4">
                            <label for="direccion" class="form-label">Dirección</label>
                            <input type="text" id="direccion" class="form-control" placeholder="Ingrese la dirección">
                        </div>
                        <div class="col-md-4">
                            <label for="contacto" class="form-label">Contacto</label>
                            <input type="text" id="contacto" class="form-control" placeholder="Ingrese un número de contacto">
                        </div>
                        <div class="col-md-4">
                            <label for="curso" class="form-label">Curso</label>
                            <select id="curso" class="form-select">
                                <option value="" disabled selected>Seleccione un curso</option>
                                <option value="Guitarra">Guitarra</option>
                                <option value="Canto">Canto</option>
                                <option value="Piano">Piano</option>
                                <option value="Ukelele">Ukelele</option>
                                <option value="Requinto">Requinto</option>
                                <option value="Violin">Violin</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label for="nivel" class="form-label">Nivel</label>
                            <select id="nivel" class="form-select">
                                <option value="" disabled selected>Seleccione un nivel</option>
                                <option value="Principiante">Principiante</option>
                                <option value="Intermedio">Intermedio</option>
                                <option value="Avanzado">Avanzado</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label for="horario" class="form-label">Horario</label>
                            <input type="text" id="horario" class="form-control" placeholder="Ingrese el horario">
                        </div>
                        <div class="col-md-4">
                            <label for="estado" class="form-label">Estado</label>
                            <select id="estado" class="form-select">
                                <option value="" disabled selected>Seleccione el estado</option>
                                <option value="Sin Confirmar">Sin Confirmar</option>
                                <option value="Pendiente">Pendiente</option>
                                <option value="Confirmado">Confirmado</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn btn-custom mt-3" id="registrar">Registrar Estudiante</button>
                </div>
                <table id="tablaDinamica" class="table table-striped table-bordered" style="width:100%">
                    <thead class="table-dark">
                        <tr>
                            <th>ID</th>
                            <th>Nombre</th>
                            <th>DNI</th>
                            <th>Fecha Nac.</th>
                            <th>Dirección</th>
                            <th>Contacto</th>
                            <th>Curso</th>
                            <th>Nivel</th>
                            <th>Horario</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Aquí se agregarán las filas dinámicamente -->
                    </tbody>
                </table>
            </div>

            <!--teacher section-->
            <div class="gestion-docente">
                <div class="form-container ">
                    <h3 class="section-title">Registrar Nuevo Docente</h3>
                    <div class="row g-3">
                        <div class="col-md-4">
                            <label for="nombreDocente" class="form-label">Nombres</label>
                            <input type="text" class="form-control" id="nombreDocente" placeholder="Ingrese el nombre completo" required>
                        </div>
                        <div class="col-md-4">
                            <label for="dniDocente" class="form-label">DNI</label>
                            <input type="text" class="form-control" id="dniDocente" placeholder="Ingrese el número de DNI" required>
                        </div>
                        <div class="col-md-4">
                            <label for="fechaNacDocente" class="form-label">Fecha de Nacimiento</label>
                            <input type="date" class="form-control" id="fechaNacDocente" required>
                        </div>
                        <div class="col-md-4">
                            <label for="especialidadDocente" class="form-label">Especialidad</label>
                            <input type="text" class="form-control" id="especialidadDocente" placeholder="Ingrese la especialidad" required>
                        </div>
                        <div class="col-md-4">
                            <label for="gradoDocente" class="form-label">Grado Académico</label>
                            <input type="text" class="form-control" id="gradoDocente" placeholder="Ingrese el grado académico" required>
                        </div>
                        <div class="col-md-4">
                            <label for="experienciaDocente" class="form-label">Experiencia (años)</label>
                            <input type="number" class="form-control" id="experienciaDocente" placeholder="Ingrese los años de experiencia" required>
                        </div>
                        <div class="col-md-4">
                            <label for="horarioDocente" class="form-label">Horario Disponible</label>
                            <input type="text" class="form-control" id="horarioDocente" placeholder="Ingrese el horario disponible" required>
                        </div>
                        <div class="col-md-4">
                            <label for="contactoDocente" class="form-label">Contacto</label>
                            <input type="email" class="form-control" id="contactoDocente" placeholder="Ingrese el correo de contacto" required>
                        </div>
                        <div class="col-md-4">
                            <label for="salarioDocente" class="form-label">Salario (PEN)</label>
                            <input type="number" class="form-control" id="salarioDocente" placeholder="Ingrese el salario esperado" required>
                        </div>
                    </div>
                    <button type="button" class="btn btn-custom mt-3" id="registrarDocente">Registrar Docente</button>
                </div>
                <table id="tablaDinamicaDocente" class="table table-striped table-bordered" style="width:100%">
                    <thead class="table-dark">
                        <tr>
                            <th>ID</th>
                            <th>Nombres</th>
                            <th>DNI</th>
                            <th>Fecha Nac.</th>
                            <th>Especialidad</th>
                            <th>Grado Académico</th>
                            <th>Experiencia</th>
                            <th>Horario</th>
                            <th>Contacto</th>
                            <th>Salario</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>

            <!--signature section-->
            <div class="gestion-curso">
                <div class="form-container">
                    <h3 class="section-title">Registrar Nuevo Curso</h3>
                    <div class="row g-3">
                        <div class="col-md-4">
                            <label for="nombreCurso" class="form-label">Nombres</label>
                            <input type="text" id="nombreCurso" class="form-control" placeholder="Ingrese el nombre del curso" required>
                        </div>
                        <div class="col-md-4">
                            <label for="descripcionCurso" class="form-label">Descripción</label>
                            <textarea id="descripcionCurso" class="form-control" rows="1" placeholder="Ingrese una breve descripción" required></textarea>
                        </div>
                        <div class="col-md-4">
                            <label for="duracionCurso" class="form-label">Duración (horas)</label>
                            <input type="number" id="duracionCurso" class="form-control" placeholder="Ingrese la duración" required>
                        </div>
                        <div class="col-md-4">
                            <label for="nivelCurso" class="form-label">Nivel</label>
                            <select id="nivelCurso" class="form-select" required>
                                <option value="" disabled selected>Seleccione el nivel</option>
                                <option value="Básico">Básico</option>
                                <option value="Intermedio">Intermedio</option>
                                <option value="Avanzado">Avanzado</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label for="horarioCurso" class="form-label">Horario</label>
                            <input type="text" id="horarioCurso" class="form-control" placeholder="Ingrese el horario" required>
                        </div>
                        <div class="col-md-4">
                            <label for="docenteCurso" class="form-label">Docente</label>
                            <input type="text" id="docenteCurso" class="form-control" placeholder="Ingrese el nombre del docente" required>
                        </div>
                        <div class="col-md-4">
                            <label for="numPlazaCurso" class="form-label">N° de Plazas</label>
                            <input type="number" id="numPlazaCurso" class="form-control" placeholder="Ingrese el número de plazas" required>
                        </div>
                        <div class="col-md-4">
                            <label for="costoCurso" class="form-label">Costo (PEN)</label>
                            <input type="number" id="costoCurso" class="form-control" placeholder="Ingrese el costo" required>
                        </div>
                        <div class="col-md-4">
                            <label for="materialCurso" class="form-label">Material (opcional)</label>
                            <textarea id="materialCurso" class="form-control" rows="1" placeholder="Describa los materiales (opcional)"></textarea>
                        </div>
                    </div>
                    <button class="btn btn-custom mt-3" id="registrarCurso">Registrar Curso</button>
                </div>
                <table id="tablaDinamicaCurso" class="table table-striped table-bordered" style="width:100%">
                    <thead class="table-dark">
                        <tr>
                            <th>ID</th>
                            <th>Nombres</th>
                            <th>Descripción</th>
                            <th>Duración</th>
                            <th>Nivel</th>
                            <th>Horario</th>
                            <th>Docente</th>
                            <th>N° de Plazas</th>
                            <th>Costo</th>
                            <th>Material</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Aquí se agregarán las filas dinámicamente -->
                    </tbody>
                </table>
            </div>
            
            <!-- Report Section -->
            <div class="reporte" style="display:none">
                <h2 class="section-title">Reportes Generales</h2>
                <div class="row">
                    <div class="col-lg-6 mb-4">
                        <div class="card h-100 border-0 shadow-sm">
                            <div class="card-header bg-primary text-white d-flex align-items-center">
                                <i class="fas fa-chart-bar me-2"></i> Estudiantes por Curso
                            </div>
                            <div class="card-body">
                                <canvas id="reporteEstudiantesCurso" height="300"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 mb-4">
                        <div class="card h-100 border-0 shadow-sm">
                            <div class="card-header bg-success text-white d-flex align-items-center">
                                <i class="fas fa-chart-pie me-2"></i> Distribución de Niveles
                            </div>
                            <div class="card-body">
                                <canvas id="reporteNiveles" height="300"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="mt-4">
                    <button class="btn btn-primary btn-lg"><i class="fas fa-file-pdf me-2"></i></button>
                    <button class="btn btn-success btn-lg"><i class="fas fa-file-excel me-2"></i></button>
                    <button class="btn btn-secondary btn-lg"><i class="fas fa-print me-2"></i></button>
                </div>
            </div>
            
            <!-- Configuration Section -->
            <div class="configuracion" style="display:none">
                <h2 class="section-title">Configuración del Sistema</h2>
                
                <div class="config-row">
                    <!-- Configuración de Usuario -->
                    <div class="config-card">
                        <div class="card-header bg-info text-white">
                            <i class="fas fa-user-cog"></i> Configuración de Usuario
                        </div>
                        <div class="card-body">
                            <form>
                                <div class="mb-4">
                                    <label class="form-label fw-medium">Nombre</label>
                                    <input type="text" class="form-control form-control-lg" value="Luis Miguel Roque Huacca">
                                </div>
                                <div class="mb-4">
                                    <label class="form-label fw-medium">Nombre de usuario</label>
                                    <input type="text" class="form-control form-control-lg" value="Luis Miguel Roque Huacca">
                                </div>
                                <div class="mb-4">
                                    <label class="form-label fw-medium">Correo electrónico</label>
                                    <input type="email" class="form-control form-control-lg" value="luis@gmail.com">
                                </div>
                                <div class="mb-4">
                                    <label class="form-label fw-medium">Foto de perfil</label>
                                    <div class="d-flex align-items-center gap-3">
                                        <img src="https://via.placeholder.com/80" alt="Foto de perfil" class="img-fluid rounded-circle" style="width: 80px; height: 80px; object-fit: cover;">
                                        <div>
                                            <button class="btn btn-outline-info btn-sm">Cambiar</button>
                                            <button class="btn btn-outline-danger btn-sm">Eliminar</button>
                                        </div>
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-info btn-lg w-100">
                                    <i class="fas fa-save me-2"></i>Guardar Cambios
                                </button>
                            </form>
                        </div>
                    </div>
                    
                    <!-- Seguridad -->
                    <div class="config-card">
                        <div class="card-header bg-warning text-dark">
                            <i class="fas fa-lock"></i> Seguridad
                        </div>
                        <div class="card-body">
                            <form>
                                <div class="mb-4">
                                    <label class="form-label fw-medium">Contraseña actual</label>
                                    <input type="password" class="form-control form-control-lg">
                                </div>
                                
                                <div class="mb-4">
                                    <label class="form-label fw-medium">Nueva contraseña</label>
                                    <input type="password" class="form-control form-control-lg" placeholder="Ingrese nueva contraseña">
                                    <div class="progress mt-2" style="height: 8px;">
                                        <div class="progress-bar bg-danger" role="progressbar" style="width: 25%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    <div class="form-text">La contraseña debe tener al menos 8 caracteres</div>
                                </div>
                                
                                <div class="mb-4">
                                    <label class="form-label fw-medium">Confirmar nueva contraseña</label>
                                    <input type="password" class="form-control form-control-lg" placeholder="Confirme su nueva contraseña">
                                </div>
                                
                                <h5 class="mt-4 mb-3">Verificación en Dos Pasos</h5>
                                <div class="switch-container">
                                    <div class="switch-label">
                                        <h6 class="mb-0">Autenticación por SMS</h6>
                                        <p class="mb-0 text-muted small">Verificación mediante mensaje de texto</p>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox">
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                
                                <div class="switch-container">
                                    <div class="switch-label">
                                        <h6 class="mb-0">Autenticación por Correo</h6>
                                        <p class="mb-0 text-muted small">Verificación mediante correo electrónico</p>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                
                                <button type="submit" class="btn btn-warning btn-lg w-100 mt-3">
                                    <i class="fas fa-sync-alt me-2"></i>Actualizar Contraseña
                                </button>
                            </form>
                        </div>
                    </div>
                    
                    <!-- Apariencia -->
                    <div class="config-card">
                        <div class="card-header bg-primary text-white">
                            <i class="fas fa-palette"></i> Apariencia
                        </div>
                        <div class="card-body">
                            <h5 class="mb-3">Tema</h5>
                            <div class="row mb-4">
                                <div class="col-4">
                                    <div class="theme-selector" data-theme="light">
                                        <i class="fas fa-sun"></i>
                                        <h6>Claro</h6>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="theme-selector active" data-theme="dark">
                                        <i class="fas fa-moon"></i>
                                        <h6>Oscuro</h6>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="theme-selector" data-theme="default">
                                        <i class="fas fa-adjust"></i>
                                        <h6>Default</h6>
                                    </div>
                                </div>
                            </div>
                            
                            <h5 class="mt-4 mb-3">Personalización</h5>
                            <div class="row">
                                <div class="col-6 mb-3">
                                    <label class="form-label fw-medium">Color primario</label>
                                    <input type="color" class="form-control form-control-color" value="#2c3e50" title="Elige tu color primario">
                                </div>
                                <div class="col-6 mb-3">
                                    <label class="form-label fw-medium">Color secundario</label>
                                    <input type="color" class="form-control form-control-color" value="#3498db" title="Elige tu color secundario">
                                </div>
                                <div class="col-6 mb-3">
                                    <label class="form-label fw-medium">Color de acento</label>
                                    <input type="color" class="form-control form-control-color" value="#ff9900" title="Elige tu color de acento">
                                </div>
                                <div class="col-6 mb-3">
                                    <label class="form-label fw-medium">Densidad</label>
                                    <select class="form-select form-control-lg">
                                        <option value="compacto">Compacto</option>
                                        <option value="normal" selected>Normal</option>
                                        <option value="espaciado">Espaciado</option>
                                    </select>
                                </div>
                            </div>
                            
                            <h5 class="mt-4 mb-3">Fuentes</h5>
                            <select class="form-select form-control-lg mb-3">
                                <option selected>Open Sans</option>
                                <option>Roboto</option>
                                <option>Montserrat</option>
                                <option>Poppins</option>
                            </select>
                            
                            <div class="form-check form-switch mb-3">
                                <input class="form-check-input" type="checkbox" id="fontSmoothSwitch" checked>
                                <label class="form-check-label" for="fontSmoothSwitch">Suavizado de fuentes</label>
                            </div>
                            
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="animationSwitch" checked>
                                <label class="form-check-label" for="animationSwitch">Animaciones</label>
                            </div>
                            
                            <button class="btn btn-primary btn-lg w-100 mt-4">
                                <i class="fas fa-save me-2"></i>Guardar Personalización
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="config-row">
                    <div class="config-card system-card">
                        <div class="card-header bg-secondary text-white">
                            <i class="fas fa-cog"></i> Sistema
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h5 class="mb-4">Información del Sistema</h5>
                                    
                                    <div class="system-metric">
                                        <div class="metric-label">Versión</div>
                                        <div class="metric-value">1.2.0</div>
                                    </div>
                                    
                                    <div class="system-metric">
                                        <div class="metric-label">Última actualización</div>
                                        <div class="metric-value">15 Nov 2023</div>
                                    </div>
                                    
                                    <div class="system-metric">
                                        <div class="metric-label">Soporte</div>
                                        <div class="metric-value">soporte@prodigios.edu</div>
                                    </div>
                                    
                                    <div class="system-metric">
                                        <div class="metric-label">Estado</div>
                                        <div class="metric-value">Operativo</div>
                                    </div>
                                    
                                    <div class="system-metric">
                                        <div class="metric-label">Licencia</div>
                                        <div class="metric-value">Premium</div>
                                    </div>
                                    
                                    <div class="system-metric">
                                        <div class="metric-label">Próxima actualización</div>
                                        <div class="metric-value">15 Dic 2023</div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <h5 class="mb-4">Recursos del Sistema</h5>
                                    
                                    <div class="mb-4">
                                        <div class="d-flex justify-content-between mb-2">
                                            <div>
                                                <h6 class="mb-0">Almacenamiento</h6>
                                                <p class="mb-0 text-muted small">15.8 GB de 50 GB usados</p>
                                            </div>
                                            <div class="text-primary">31.6%</div>
                                        </div>
                                        <div class="progress" style="height: 8px;">
                                            <div class="progress-bar" role="progressbar" style="width: 31.6%;" aria-valuenow="31.6" aria-valuemin="0" aria-valuemax="100"></div>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <div class="d-flex justify-content-between mb-2">
                                            <div>
                                                <h6 class="mb-0">Base de Datos</h6>
                                                <p class="mb-0 text-muted small">2.4 MB de 100 MB usados</p>
                                            </div>
                                            <div class="text-success">2.4%</div>
                                        </div>
                                        <div class="progress" style="height: 8px;">
                                            <div class="progress-bar bg-success" role="progressbar" style="width: 2.4%;" aria-valuenow="2.4" aria-valuemin="0" aria-valuemax="100"></div>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <div class="d-flex justify-content-between mb-2">
                                            <div>
                                                <h6 class="mb-0">Uso de CPU</h6>
                                                <p class="mb-0 text-muted small">Promedio de los últimos 30 días</p>
                                            </div>
                                            <div class="text-info">42%</div>
                                        </div>
                                        <div class="progress" style="height: 8px;">
                                            <div class="progress-bar bg-info" role="progressbar" style="width: 42%;" aria-valuenow="42" aria-valuemin="0" aria-valuemax="100"></div>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <div class="d-flex justify-content-between mb-2">
                                            <div>
                                                <h6 class="mb-0">Memoria</h6>
                                                <p class="mb-0 text-muted small">1.2 GB de 4 GB usados</p>
                                            </div>
                                            <div class="text-warning">30%</div>
                                        </div>
                                        <div class="progress" style="height: 8px;">
                                            <div class="progress-bar bg-warning" role="progressbar" style="width: 30%;" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"></div>
                                        </div>
                                    </div>
                                    
                                    <div class="d-grid gap-2">
                                        <button class="btn btn-outline-secondary btn-lg">
                                            <i class="fas fa-sync-alt me-2"></i>Buscar Actualizaciones
                                        </button>
                                        <button class="btn btn-secondary btn-lg">
                                            <i class="fas fa-cloud-download-alt me-2"></i>Actualizar Sistema
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        let nivelEstudiantesChart;
        let categoriaCursosChart;
        let estudiantesPorCursoChart;

        let nextIds = {estudiantes: 1, docentes: 1, cursos: 1};

        let editingInfo = {tipo: null, id: null};

        // Estado de la aplicación
        const state = {
            estudiantes: [],
            docentes: [],
            cursos: [],
            actividades: []
        };

        // Inicialización
        document.addEventListener('DOMContentLoaded', () => {
            initCharts();
            
            initializeDataTable();
            initializeDataTableDocente();
            initializeDataTableCurso();
            
            updateCounters();
            updateCharts();
            initEventListeners();

            loadTheme();
            document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
        });


        const registrarBtn = document.getElementById('registrar');
        const registrarBtnDocente = document.getElementById('registrarDocente');
        const registrarBtnCurso = document.getElementById('registrarCurso');

        // Funciones auxiliares
        function updateStateFromTable(type) {

            const tableId = type === 'docentes' ? '#tablaDinamicaDocente' : 
           type === 'cursos' ? '#tablaDinamicaCurso' : '#tablaDinamica';

            if ($.fn.DataTable.isDataTable(tableId)) {
                const table = $(tableId).DataTable();
                state[type] = table.rows().data().map(row => ({
                    id: parseInt(row[0]),
                    nombre: row[1],
                    dni: row[2],
                    fecha_nacimiento: row[3],
                    direccion: row[4],
                    contacto: row[5],
                    curso: row[6],
                    nivel: row[7],
                    horario: row[8],
                    estado: row[9]
                })).toArray();
            }
        }

        // FUNCIÓN updateCharts 
        function updateCharts() {
            // 1. Distribución por niveles 
            const niveles = { Principiante: 0, Intermedio: 0, Avanzado: 0 };
            const estudiantesPorCurso = {};
            
            // Verificar SI EXISTE la tabla de estudiantes
            if ($.fn.DataTable.isDataTable('#tablaDinamica')) {
                const studentTable = $('#tablaDinamica').DataTable();
                const studentRows = studentTable.rows().data().toArray();
                
                studentRows.forEach(row => {
                    const nivel = row[7];
                    const curso = row[6];
                    
                    // Contar niveles
                    if (nivel) niveles[nivel]++;
                    
                    // Contar cursos (dinámico)
                    if (curso) {
                        if (!estudiantesPorCurso[curso]) {
                            estudiantesPorCurso[curso] = 0;
                        }
                        estudiantesPorCurso[curso]++;
                    }
                });
            }

            // 2. Actualizar gráfica de niveles
            if (nivelEstudiantesChart) {
                nivelEstudiantesChart.data.datasets[0].data = Object.values(niveles);
                nivelEstudiantesChart.update();
            }

            // 3. Actualizar gráfica de estudiantes por curso (CORREGIDO)
            if (estudiantesPorCursoChart) {
                // Actualizar etiquetas Y datos
                estudiantesPorCursoChart.data.labels = Object.keys(estudiantesPorCurso);
                estudiantesPorCursoChart.data.datasets[0].data = Object.values(estudiantesPorCurso);
                estudiantesPorCursoChart.update();
            }

            // 4. Cursos por categoría

            const cursosPorCategoria = {};
            
            // Verificar SI EXISTE la tabla de cursos
            if ($.fn.DataTable.isDataTable('#tablaDinamicaCurso')) {
                const courseTable = $('#tablaDinamicaCurso').DataTable();
                const courseRows = courseTable.rows().data().toArray();
                
                courseRows.forEach(row => {
                    const categoria = row[1];
                    if (categoria) {
                        if (!cursosPorCategoria[categoria]) {
                            cursosPorCategoria[categoria] = 0;
                        }
                        cursosPorCategoria[categoria]++;
                    }
                });
            }

            // 5. Actualizar gráfica de cursos
            if (categoriaCursosChart) {
                // Actualizar etiquetas Y datos
                categoriaCursosChart.data.labels = Object.keys(cursosPorCategoria);
                categoriaCursosChart.data.datasets[0].data = Object.values(cursosPorCategoria);
                categoriaCursosChart.update();
            }
        }

        function initializeDataTable() {
            if ($.fn.DataTable.isDataTable('#tablaDinamica')) $('#tablaDinamica').DataTable().destroy();
            
            $('#tablaDinamica').DataTable({
                dom: 'Blfrtip',
                buttons: [
                    {
                        extend: "excelHtml5",
                        text: "<i class='fa-solid fa-file-excel'></i>",
                        titleAttr: "Exportar a Excel",
                        className: "btn btn-success",
                        exportOptions: {
                            columns: [0,1,2,3,4,5,6,7,8,9]
                        }
                    },
                    {
                        extend: "pdfHtml5",
                        text: "<i class='fa-solid fa-file-pdf'></i>",
                        titleAttr: "Esportar a PDF",
                        className: "btn btn-danger",
                        exportOptions: {
                            columns: [0,1,2,3,4,5,6,7,8,9]
                        }
                    },
                    {
                        extend: "print",
                        text: "<i class='fa-solid fa-print'></i>",
                        titleAttr: "Imprimir",
                        className: "btn btn-info",
                        exportOptions: {
                            columns: [0,1,2,3,4,5,6,7,8,9]
                        },
                    }, 
                ],
                language: {
                    url: "https://cdn.datatables.net/plug-ins/1.13.6/i18n/es-ES.json"
                },
                lengthMenu: [3, 6, 9, 12],
                columnDefs: [
                    { orderable: false, targets: [10] }, 
                    { searchable: false, targets: [10] },
                    {width: "10%", targets: [5]},
                    {targets: -1},
                    {data: null},
                ], 
                pageLength: 5,
            });
        }

        registrarBtn.addEventListener('click', function () {
            const nombre = document.getElementById('nombre').value;
            const dni = document.getElementById('dni').value;
            const fecha_nacimiento = document.getElementById('fecha_nacimiento').value;
            const direccion = document.getElementById('direccion').value;
            const contacto = document.getElementById('contacto').value;
            const curso = document.getElementById('curso').value;
            const nivel = document.getElementById('nivel').value;
            const horario = document.getElementById('horario').value;
            const estado = document.getElementById('estado').value;
            
            if (nombre && dni && fecha_nacimiento && direccion && contacto && curso && nivel && horario && estado) {
                const table = $('#tablaDinamica').DataTable();
                if (editingInfo.tipo === 'estudiante' && editingInfo.id !== null) {
                    // Actualizar estudiante existente
                    table.rows().every(function() {
                        const data = this.data();
                        if (parseInt(data[0]) === editingInfo.id) {
                            this.data([editingInfo.id, nombre, dni, fecha_nacimiento, direccion,contacto, curso,nivel,horario, estado,
                                '<button class="btn btn-warning btn-edit"><i class="fa-solid fa-pencil "></i></button> <button class="btn btn-danger btn-delete"><i class="fa-solid fa-trash-can"></i></button>'
                            ]);
                        }
                    });
                } else {
                    table.row.add([nextIds.estudiantes++, nombre, dni, fecha_nacimiento, direccion,contacto, curso,nivel,horario, estado,
                        '<button class="btn btn-warning btn-edit"><i class="fa-solid fa-pencil "></i></button> <button class="btn btn-danger btn-delete"><i class="fa-solid fa-trash-can"></i></button>']).draw();
                }

                document.getElementById('nombre').value = '';
                document.getElementById('dni').value = '';
                document.getElementById('fecha_nacimiento').value = '';
                document.getElementById('direccion').value = '';
                document.getElementById('contacto').value = '';
                document.getElementById('curso').value = '';
                document.getElementById('nivel').value = '';
                document.getElementById('horario').value = '';
                document.getElementById('estado').value = '';

                // Resetear estado
                editingInfo = { tipo: null, id: null };
                $('#registrar').text('Registrar Estudiante');

            } else {
                alert("Por favor, complete todos los campos antes de registrar.");
            }
            
            updateAll();
        });

        $('#tablaDinamica').on('click', '.btn-edit', function () {
            const row = $(this).closest('tr');
            const data = $('#tablaDinamica').DataTable().row(row).data();
            editingInfo = { tipo: 'estudiante', id: parseInt(data[0]) };
            document.getElementById('nombre').value = data[1];
            document.getElementById('dni').value = data[2];
            document.getElementById('fecha_nacimiento').value = data[3];
            document.getElementById('direccion').value = data[4];
            document.getElementById('contacto').value = data[5];
            document.getElementById('curso').value = data[6];
            document.getElementById('nivel').value = data[7];
            document.getElementById('horario').value = data[8];
            document.getElementById('estado').value = data[9];
            $('#registrar').text('Actualizar');
            updateAll();
        });
        $('#tablaDinamica').on('click', '.btn-delete', function () {
            const row = $(this).closest('tr');
            $('#tablaDinamica').DataTable().row(row).remove().draw();
            updateAll();
        });
        
        function initializeDataTableDocente() {
            if ($.fn.DataTable.isDataTable('#tablaDinamicaDocente')) {
                $('#tablaDinamicaDocente').DataTable().destroy();
            }

            $('#tablaDinamicaDocente').DataTable({
                dom: 'Blfrtip',
                buttons: [
                    {
                        extend: "excelHtml5",
                        text: "<i class='fas fa-file-excel'></i>",
                        titleAttr: "Exportar a Excel",
                        className: "btn btn-success",
                        exportOptions: {
                            columns: [0,1,2,3,4,5,6,7,8,9]
                        }
                    },
                    {
                        extend: "pdfHtml5",
                        text: "<i class='fa-solid fa-file-pdf'></i>",
                        titleAttr: "Exportar a PDF",
                        className: "btn btn-danger",
                        exportOptions: {
                            columns: [0,1,2,3,4,5,6,7,8,9]
                        }
                    },
                    {
                        extend: "print",
                        text: "<i class='fa-solid fa-print'></i>",
                        titleAttr: "Imprimir",
                        className: "btn btn-info",
                        exportOptions: {
                            columns: [0,1,2,3,4,5,6,7,8,9]
                        }
                    }
                ],
                language: {
                    url: "https://cdn.datatables.net/plug-ins/1.13.6/i18n/es-ES.json"
                },
                lengthMenu: [3, 6, 9, 12],
                columnDefs: [
                    { orderable: false, targets: [-1,0,1,2,3,4,5,6,7,8,9,10]}, // Deshabilitar ordenación en la última columna (Acciones)
                    { searchable: false, targets: -1 }, // Deshabilitar búsqueda en la última columna
                    {width: "10%", target: [6]}
                ],
                pageLength: 5,
            });
        }

        registrarBtnDocente.addEventListener('click', function () {
            const nombre = document.getElementById('nombreDocente').value;
            const dni = document.getElementById('dniDocente').value;
            const fechaNac = document.getElementById('fechaNacDocente').value;
            const especialidad = document.getElementById('especialidadDocente').value;
            const grado = document.getElementById('gradoDocente').value;
            const experiencia = document.getElementById('experienciaDocente').value;
            const horario = document.getElementById('horarioDocente').value;
            const contacto = document.getElementById('contactoDocente').value;
            const salario = document.getElementById('salarioDocente').value;

            if (nombre && dni && fechaNac && especialidad && grado && experiencia && horario && contacto && salario) {
                const table = $('#tablaDinamicaDocente').DataTable();
                if (editingInfo.tipo === 'docente' && editingInfo.id !== null) {
                    // Actualizar la fila por ID
                    table.rows().every(function (rowIdx, tableLoop, rowLoop) {
                        const data = this.data();
                        if (parseInt(data[0]) === editingInfo.id) {
                            this.data([
                                editingInfo.id, nombre, dni, fechaNac, especialidad, grado, experiencia, horario, contacto, salario,
                                '<button class="btn btn-warning btn-edit"><i class="fa-solid fa-pencil"></i></button> <button class="btn btn-danger btn-delete"><i class="fa-solid fa-trash-can"></i></button>'
                            ]);
                        }
                    });
                } else {
                    table.row.add([
                        nextIds.docentes++, nombre, dni, fechaNac, especialidad, grado, experiencia, horario, contacto, salario,
                        '<button class="btn btn-warning btn-edit"><i class="fa-solid fa-pencil"></i></button> <button class="btn btn-danger btn-delete"><i class="fa-solid fa-trash-can"></i></button>'
                    ]).draw();
                }

                document.getElementById('nombreDocente').value = '';      
                document.getElementById('dniDocente').value = '';
                document.getElementById('fechaNacDocente').value = '';
                document.getElementById('especialidadDocente').value = '';
                document.getElementById('gradoDocente').value = '';
                document.getElementById('experienciaDocente').value = '';
                document.getElementById('horarioDocente').value = '';
                document.getElementById('contactoDocente').value = '';
                document.getElementById('salarioDocente').value = '';
                editingInfo = { tipo: null, id: null };
                $('#registrarDocente').text('Registrar Docente');

            } else {
                alert("Por favor, complete todos los campos antes de registrar.");
            }
            updateAll();
        });

        $('#tablaDinamicaDocente').on('click', '.btn-edit', function () {
            const row = $(this).closest('tr');
            const data = $('#tablaDinamicaDocente').DataTable().row(row).data();
            editingInfo = { tipo: 'docente', id: parseInt(data[0]) };
            document.getElementById('nombreDocente').value = data[1];
            document.getElementById('dniDocente').value = data[2];
            document.getElementById('fechaNacDocente').value = data[3];
            document.getElementById('especialidadDocente').value = data[4];
            document.getElementById('gradoDocente').value = data[5];
            document.getElementById('experienciaDocente').value = data[6];
            document.getElementById('horarioDocente').value = data[7];
            document.getElementById('contactoDocente').value = data[8];
            document.getElementById('salarioDocente').value = data[9];
            $('#registrarDocente').text('Actualizar');
            updateAll();
        });
        $('#tablaDinamicaDocente').on('click', '.btn-delete', function () {
            const row = $(this).closest('tr');
            $('#tablaDinamicaDocente').DataTable().row(row).remove().draw();
            updateAll();
        });

        function initializeDataTableCurso() {
            if ($.fn.DataTable.isDataTable('#tablaDinamicaCurso')) {
                $('#tablaDinamicaCurso').DataTable().destroy();
            }

            $('#tablaDinamicaCurso').DataTable({
                dom: 'Blfrtip',
                buttons: [
                    {
                        extend: "excelHtml5",
                        text: "<i class='fa-solid fa-file-excel'></i>",
                        titleAttr: "Exportar a Excel",
                        className: "btn btn-success",
                        exportOptions: {
                            columns: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
                        }
                    },
                    {
                        extend: "pdfHtml5",
                        text: "<i class='fa-solid fa-file-pdf'></i>",
                        titleAttr: "Esportar a PDF",
                        className: "btn btn-danger",
                        exportOptions: {
                            columns: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
                        }
                    },
                    {
                        extend: "print",
                        text: "<i class='fa-solid fa-print'></i>",
                        titleAttr: "Imprimir",
                        className: "btn btn-info",
                        exportOptions: {
                            columns: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
                        }
                    }
                ],
                language: {
                    url: "https://cdn.datatables.net/plug-ins/1.13.6/i18n/es-ES.json"
                },
                lengthMenu: [3, 6, 9, 12],
                columnDefs: [
                    { orderable: false, targets: [-1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10] },
                    { searchable: false, targets: -1 },
                    { width: "1%", targets: [5] },
                    { targets: -1 },
                    { data: null }
                ],
                pageLength: 5
            });
        };

        registrarBtnCurso.addEventListener('click', function () {
            const nombreCurso = document.getElementById('nombreCurso').value;
            const descripcionCurso = document.getElementById('descripcionCurso').value;
            const duracionCurso = document.getElementById('duracionCurso').value;
            const nivelCurso = document.getElementById('nivelCurso').value;
            const horarioCurso = document.getElementById('horarioCurso').value;
            const docenteCurso = document.getElementById('docenteCurso').value;
            const numPlazaCurso = document.getElementById('numPlazaCurso').value;
            const costoCurso = document.getElementById('costoCurso').value;
            const materialCurso = document.getElementById('materialCurso').value;
            if (nombreCurso && descripcionCurso && duracionCurso && nivelCurso && horarioCurso && docenteCurso && numPlazaCurso && costoCurso && materialCurso) {
                const table = $('#tablaDinamicaCurso').DataTable();
                if (editingInfo.tipo === 'curso' && editingInfo.id !== null) {
                    // Actualizar la fila por ID
                    table.rows().every(function (rowIdx, tableLoop, rowLoop) {
                        const data = this.data();
                        if (parseInt(data[0]) === editingInfo.id) {
                            this.data([editingInfo.id, nombreCurso, descripcionCurso, duracionCurso, nivelCurso, horarioCurso, docenteCurso, numPlazaCurso, costoCurso, materialCurso, 
                            '<button class="btn btn-warning btn-edit"><i class="fa-solid fa-pencil "></i></button> <button class="btn btn-danger btn-delete"><i class="fa-solid fa-trash-can"></i></button>']);
                        }
                    });
                } else {
                    table.row.add([nextIds.cursos++, nombreCurso, descripcionCurso, duracionCurso, nivelCurso, horarioCurso, docenteCurso, numPlazaCurso, costoCurso, materialCurso,  
                    '<button class="btn btn-warning btn-edit"><i class="fa-solid fa-pencil "></i></button> <button class="btn btn-danger btn-delete"><i class="fa-solid fa-trash-can"></i></button>']).draw();
                }
                document.getElementById('nombreCurso').value = '';
                document.getElementById('descripcionCurso').value = '';
                document.getElementById('duracionCurso').value = '';
                document.getElementById('nivelCurso').value = '';
                document.getElementById('horarioCurso').value = '';
                document.getElementById('docenteCurso').value = '';
                document.getElementById('numPlazaCurso').value = '';
                document.getElementById('costoCurso').value = '';
                document.getElementById('materialCurso').value = '';
                editingInfo = { tipo: null, id: null };
                $('#registrarCurso').text('Registrar Curso');
            } else {
                alert('Por favor, complete todos los campos antes de registrar.');
            }
            updateAll();
        });

        $('#tablaDinamicaCurso').on('click', '.btn-edit', function () {
            const row = $(this).closest('tr');
            const data = $('#tablaDinamicaCurso').DataTable().row(row).data();
            editingInfo = { tipo: 'curso', id: parseInt(data[0]) };
            document.getElementById('nombreCurso').value = data[1];
            document.getElementById('descripcionCurso').value = data[2];
            document.getElementById('duracionCurso').value = data[3];
            document.getElementById('nivelCurso').value = data[4];
            document.getElementById('horarioCurso').value = data[5];
            document.getElementById('docenteCurso').value = data[6];
            document.getElementById('numPlazaCurso').value = data[7];
            document.getElementById('costoCurso').value = data[8];
            document.getElementById('materialCurso').value = data[9];
            $('#registrarCurso').text('Actualizar');
            updateAll();
        });
        $('#tablaDinamicaCurso').on('click', '.btn-delete', function () {
            const row = $(this).closest('tr');
            $('#tablaDinamicaCurso').DataTable().row(row).remove().draw();
            updateAll();
        });

        function initEventListeners() {
            // Event listener para logout
            document.getElementById('logoutBtn').addEventListener('click', function() {
                localStorage.removeItem('loggedIn');
                window.location.href = 'index.html';
            });

            // Event listeners para menú
            document.querySelectorAll('.sidebar a').forEach(link => {
                link.addEventListener('click', function() {
                    document.querySelectorAll('.sidebar a').forEach(el => el.classList.remove('active'));
                    this.classList.add('active');
                });
            });
        }

        function updateCounters() {
            let totalEst = 0;
            if ($.fn.DataTable.isDataTable('#tablaDinamica')) {
                totalEst = $('#tablaDinamica').DataTable().rows().count();
            }
            document.getElementById('total-estudiantes').textContent = totalEst;

            let totalDoc = 0;
            if ($.fn.DataTable.isDataTable('#tablaDinamicaDocente')) {
                totalDoc = $('#tablaDinamicaDocente').DataTable().rows().count();
            }
            document.getElementById('total-docentes').textContent = totalDoc;

            let totalCur = 0;
            if ($.fn.DataTable.isDataTable('#tablaDinamicaCurso')) {
                totalCur = $('#tablaDinamicaCurso').DataTable().rows().count();
            }
            document.getElementById('total-cursos').textContent = totalCur;
        }


        function toggleVisibility(mainOption, subOption, title) {
            // Ocultar todas las secciones
            document.querySelectorAll('.suboption-panel > div').forEach(div => {
                div.style.display = 'none';
            });
            
            // Mostrar la sección seleccionada
            if (mainOption) {
                const section = document.querySelector(`.${mainOption.toLowerCase()}`);
                if (section) section.style.display = 'block';
            }
            
            if (subOption) {
                const section = document.querySelector(`.gestion-${subOption}`);
                if (section) section.style.display = 'block';
            }
            
            // Actualizar título
            if (title) document.querySelector('.navbar-brand').innerHTML = `${title}`;

            // Inicializar DataTables solo cuando se muestra la sección
            if (subOption === 'estudiante') {
                initializeDataTable();
            } else if (subOption === 'docente') {
                initializeDataTableDocente();
            } else if (subOption === 'curso') {
                initializeDataTableCurso();
            }
            
            // Reiniciar estado de edición al cambiar de sección
            editingInfo = { tipo: null, id: null };
            
            // Restaurar texto de botones
            document.querySelectorAll('#registrar, #registrarDocente, #registrarCurso')
            .forEach(btn => {
                if (btn.id === 'registrar') btn.textContent = 'Registrar Estudiante';
                if (btn.id === 'registrarDocente') btn.textContent = 'Registrar Docente';
                if (btn.id === 'registrarCurso') btn.textContent = 'Registrar Curso';
            });

            if (mainOption === 'dashboard') updateAll();
        }

        function initCharts() {
            // Gráfico de distribución por niveles
            const ctxNivel = document.getElementById('nivelEstudiantesChart');
            nivelEstudiantesChart = new Chart(ctxNivel, {
                type: 'doughnut',
                data: {
                    labels: ['Principiante', 'Intermedio', 'Avanzado'],
                    datasets: [{
                        label: "Estudiantes por Nivel",
                        data: [0, 0, 0], // Datos iniciales vacíos
                        backgroundColor: ['#4e73df', '#1cc88a', '#36b9cc'],
                        borderWidth: 0
                    }]
                },
                options: {
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: { font: { size: 14 } }
                        },
                        tooltip: {
                            bodyFont: { size: 14 },
                            titleFont: { size: 16 }
                        }
                    }
                }
            });

            // Gráfico de categorías de cursos
            const ctxCategoria = document.getElementById('categoriaCursosChart');
            categoriaCursosChart = new Chart(ctxCategoria, {
                type: 'bar',
                data: {
                    labels: [''],
                    datasets: [{
                        label: 'Cursos por categoría',
                        data: [0, 0, 0, 0, 0], // Datos iniciales vacíos
                        backgroundColor: ['#4e73df', '#1cc88a', '#36b9cc', '#f6c23e', '#e74c3c'],
                        borderWidth: 0
                    }]
                },
                options: {
                    maintainAspectRatio: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: { font: { size: 12 } }
                        },
                        x: {
                            ticks: { font: { size: 12 } }
                        }
                    },
                    plugins: { legend: { display: false } }
                }
            });
            
            //Gráfico de Estudiantes por Curso
            estudiantesPorCursoChart = new Chart(
                document.getElementById('estudiantesPorCursoChart'), 
                {
                    type: 'bar',
                    data: {
                        labels: [''],
                        datasets: [{
                            label: 'Estudiantes por Curso',
                            data: [0, 0, 0, 0, 0],
                            backgroundColor: [
                                '#4e73df',
                                '#1cc88a',
                                '#36b9cc',
                                '#f6c23e',
                                '#e74c3c'
                            ],
                            borderRadius: 5,
                            barThickness: 20
                        }]
                    },
                    options: {
                        maintainAspectRatio: true,
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    font: { size: 12 }
                                }
                            },
                            x: {
                                ticks: {
                                    font: { size: 12 }
                                }
                            }
                        },
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                bodyFont: { size: 14 },
                                titleFont: { size: 16 }
                            }
                        }
                    }
                }
            );


            // Gráfico para reportes
            new Chart(
                document.getElementById('reporteEstudiantesCurso'), 
                {
                    type: 'pie',
                    data: {
                        labels: ['Guitarra', 'Piano', 'Canto', 'Violín', 'Teoría'],
                        datasets: [{
                            label: 'Estudiantes por Curso',
                            data: [15, 12, 8, 5, 3],
                            backgroundColor: [
                                '#4e73df',
                                '#1cc88a',
                                '#36b9cc',
                                '#f6c23e',
                                '#e74c3c'
                            ],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    font: {
                                        size: 14
                                    }
                                }
                            },
                            tooltip: {
                                bodyFont: {
                                    size: 14
                                },
                                titleFont: {
                                    size: 16
                                }
                            }
                        }
                    }
                }
            );
            
            new Chart(
                document.getElementById('reporteNiveles'), 
                {
                    type: 'polarArea',
                    data: {
                        labels: ['Principiante', 'Intermedio', 'Avanzado'],
                        datasets: [{
                            label: 'Distribución de Niveles',
                            data: [25, 15, 10],
                            backgroundColor: [
                                'rgba(78, 115, 223, 0.7)',
                                'rgba(28, 200, 138, 0.7)',
                                'rgba(54, 185, 204, 0.7)'
                            ],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    font: {
                                        size: 14
                                    }
                                }
                            },  
                            tooltip: {
                                bodyFont: {
                                    size: 14
                                },
                                titleFont: {
                                    size: 16
                                }
                            }
                        }
                    }
                }
            );
            updateCharts();
        }

        function updateAll() {
            updateStateFromTable('estudiantes');
            updateStateFromTable('docentes');
            updateStateFromTable('cursos');
            updateCounters();
            updateCharts();
        }

        document.querySelectorAll('.theme-selector').forEach(selector => {
            selector.addEventListener('click', function() {
                const theme = this.dataset.theme;
                applyTheme(theme);
                
                document.querySelectorAll('.theme-selector').forEach(el => {
                    el.classList.remove('active');
                });
                this.classList.add('active');
            });
        });

        // Sistema de temas
        const themeToggle = document.getElementById('theme-toggle');
        const themeToggleIcon = document.getElementById('theme-icon');
        console.log(themeToggleIcon)

        // Función para aplicar el tema
        function applyTheme(theme) {
            document.body.classList.remove('theme-light', 'theme-dark');
            document.querySelectorAll('.theme-selector').forEach(el => {
                el.classList.remove('theme-light', 'theme-dark', 'theme-auto');
            });
            
            if(theme !== 'default') {
                document.body.classList.add(`theme-${theme}`);
            }
            
            localStorage.setItem('theme', theme);
            
            const themeIcon = document.getElementById('theme-icon');
            themeIcon.className = theme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
        }

        // Cargar tema guardado o detectar preferencia del sistema
        function loadTheme() {
            const savedTheme = localStorage.getItem('theme') || 'default';
            applyTheme(savedTheme);
        }

        // Alternar entre temas
        function toggleTheme() {
            const currentTheme = localStorage.getItem('theme') || 'default';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            applyTheme(newTheme)
        }
    </script>
</body>
</html>